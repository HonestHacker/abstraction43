[gd_scene load_steps=11 format=3 uid="uid://6e0dcgptp8lq"]

[ext_resource type="Script" uid="uid://m30fino0b43d" path="res://scripts/entities/player/player.gd" id="1_2e6ej"]
[ext_resource type="Script" uid="uid://dlo6kr6oe5he" path="res://scripts/entities/player/use_ray.gd" id="3_nnckv"]
[ext_resource type="Script" uid="uid://yis8s8uwh4n0" path="res://scripts/entities/player/pickup_area.gd" id="4_undc7"]
[ext_resource type="Script" uid="uid://c13mc5s3njuht" path="res://scripts/entities/player/pda/pda.gd" id="5_vutjv"]
[ext_resource type="Script" uid="uid://xg7q5nrwp1al" path="res://scripts/entities/player/pda/action_queue.gd" id="6_nud00"]
[ext_resource type="Script" uid="uid://1s466soi00u5" path="res://scripts/ui/hud/pda_hud.gd" id="7_po8h8"]
[ext_resource type="Script" uid="uid://06058lyc2nr8" path="res://scripts/ui/hud/pause_menu.gd" id="7_ss7kx"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_sq03e"]
height = 2.25

[sub_resource type="SphereShape3D" id="SphereShape3D_gqv6t"]
radius = 0.6

[sub_resource type="BoxShape3D" id="BoxShape3D_d4qa6"]

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("camera", "pda")]
script = ExtResource("1_2e6ej")
look_enabled = null
move_enabled = null
jump_when_held = null
sensitivity = Vector2(0.1, 0.1)
move_forward = "move_forward"
move_backward = "move_backward"
move_left = "move_left"
move_right = "move_right"
jump = "jump"
gravity = null
ground_accelerate = null
air_accelerate = null
max_ground_velocity = 6.0
max_air_velocity = null
jump_force = null
friction = null
bhop_frames = null
additive_bhop = null
camera = NodePath("Camera")
pda = NodePath("Camera/PDA")
debug_mode_enabled = null

[node name="CollisionShape" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_sq03e")

[node name="Camera" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="UseRay" type="RayCast3D" parent="Camera" node_paths=PackedStringArray("player")]
target_position = Vector3(0, 0, -3)
script = ExtResource("3_nnckv")
player = NodePath("../..")

[node name="PickupArea" type="Area3D" parent="Camera" node_paths=PackedStringArray("floor_area")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -2.41386)
gravity_space_override = 1
gravity_point_center = Vector3(0, 0, 0)
gravity_direction = Vector3(0, 0, 0)
gravity = 0.0
script = ExtResource("4_undc7")
floor_area = NodePath("../../FloorArea")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Camera/PickupArea"]
shape = SubResource("SphereShape3D_gqv6t")

[node name="PDA" type="Node3D" parent="Camera" node_paths=PackedStringArray("action_queue", "hud")]
script = ExtResource("5_vutjv")
action_queue = NodePath("ActionQueue")
hud = NodePath("HUD")

[node name="ActionQueue" type="Node" parent="Camera/PDA"]
script = ExtResource("6_nud00")

[node name="HUD" type="Control" parent="Camera/PDA" node_paths=PackedStringArray("actions")]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("7_po8h8")
actions = NodePath("Actions")

[node name="Actions" type="HBoxContainer" parent="Camera/PDA/HUD"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="FloorArea" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.13739, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="FloorArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.460535, 0)
shape = SubResource("BoxShape3D_d4qa6")

[node name="logic" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_left = -3.0
offset_right = 65.0
offset_bottom = 65.0
script = ExtResource("7_ss7kx")

[node name="settings" type="Control" parent="logic"]
visible = false
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="FOV_slider" type="HSlider" parent="logic/settings"]
layout_mode = 0
offset_left = 887.0
offset_top = 2.0
offset_right = 1153.0
offset_bottom = 42.0

[node name="Label" type="Label" parent="logic/settings/FOV_slider"]
layout_mode = 0
offset_left = -46.0
offset_top = 9.0
offset_right = -6.0
offset_bottom = 32.0
text = "POV"

[node name="save" type="Control" parent="logic"]
visible = false
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="save" type="LineEdit" parent="logic/save"]
layout_mode = 0
offset_left = 3.0
offset_top = 1.0
offset_right = 191.0
offset_bottom = 62.0

[node name="save_button" type="Button" parent="logic/save/save"]
layout_mode = 0
offset_left = 191.0
offset_top = 3.0
offset_right = 256.0
offset_bottom = 61.0

[node name="load" type="OptionButton" parent="logic/save"]
layout_mode = 0
offset_left = 5.0
offset_top = 65.0
offset_right = 189.0
offset_bottom = 100.0

[node name="load_button" type="Button" parent="logic/save/load"]
layout_mode = 0
offset_left = 186.0
offset_top = -1.0
offset_right = 253.0
offset_bottom = 43.0

[node name="pause_menu" type="Control" parent="logic"]
visible = false
anchors_preset = 0
offset_left = 9.0
offset_top = 39.0
offset_right = 49.0
offset_bottom = 79.0

[node name="continue" type="Button" parent="logic/pause_menu"]
layout_mode = 0
offset_left = 407.0
offset_top = -36.0
offset_right = 738.0
offset_bottom = 67.0

[node name="new_game" type="Button" parent="logic/pause_menu"]
layout_mode = 0
offset_left = 423.0
offset_top = 79.0
offset_right = 754.0
offset_bottom = 188.0

[node name="load_and_save" type="Button" parent="logic/pause_menu"]
layout_mode = 0
offset_left = 423.0
offset_top = 193.0
offset_right = 754.0
offset_bottom = 286.0

[node name="settings" type="Button" parent="logic/pause_menu"]
layout_mode = 0
offset_left = 417.0
offset_top = 298.0
offset_right = 748.0
offset_bottom = 407.0

[node name="exit" type="Button" parent="logic/pause_menu"]
layout_mode = 0
offset_left = 420.0
offset_top = 424.0
offset_right = 751.0
offset_bottom = 520.0

[connection signal="body_exited" from="Camera/PickupArea" to="Camera/PickupArea" method="_on_body_exited"]
[connection signal="value_changed" from="logic/settings/FOV_slider" to="." method="_on_fov_slider_value_changed"]
[connection signal="pressed" from="logic/save/save/save_button" to="." method="_on_save_button_pressed"]
[connection signal="pressed" from="logic/save/load/load_button" to="." method="_on_load_button_pressed"]
[connection signal="pressed" from="logic/pause_menu/continue" to="." method="_on_continue_pressed"]
[connection signal="pressed" from="logic/pause_menu/new_game" to="." method="_on_new_game_pressed"]
[connection signal="pressed" from="logic/pause_menu/load_and_save" to="." method="_on_load_and_save_pressed"]
[connection signal="pressed" from="logic/pause_menu/settings" to="." method="_on_settings_pressed"]
[connection signal="pressed" from="logic/pause_menu/exit" to="." method="_on_exit_pressed"]
